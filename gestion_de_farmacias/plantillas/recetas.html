<!-- Contenido estatico de la pagina -->
{% extends 'base.html' %} 

<!--Titulo de la pagina o pestaÃ±a-->
{% block title %}
	Recetas
{% endblock  %}


{% block content %}
	
	<h1>Recetas</h1>

	{% if mensaje %}
                <div>
                        <h3>el mensaje es: </h3>
                        <p>{{mensaje}}</p>
                </div>
        {% endif %}
	
	<div class="">
	
		{% if formulario_nueva_receta.errors %}
			<p style="color:red;">Por favor revisa este campo</p>
		{% endif %}

		<div class="card">
			<div class="card-header">
				<h3>Crear receta</h3>
			</div>
			
			<form method="POST">{% csrf_token %}
				<div class="card-body">
					{{formulario_nueva_receta.as_p}}
				</div>

				<div class="card-footer">
					<input class="btn btn-primary" type="submit" value="Crear">
				</div>
			</form>
		</div>

	</div>


	<hr>


	<div>
		<!-- ==============================-->
		<!-- Tabla con las recetas -->
		<!-- ==============================-->
		{% if recetas_list  %}
			<table class="table table-hover">
                                
				<thead>
                                        <tr>
                                                <th>Medicamento</th>
                                                <th>Paciente</th>
                                                <th>Medico</th>
                                                <th>Descripcion</th>
						<th>Vencimiento</th>
                                                <th>Estado</th>
						<th>...</th>
                                        </tr>
                                </thead>
                                
                                <tbody>
					{% for receta in recetas_list %}
                                                <tr>
                                                        <td>{{ receta.medicamento }}</td>
                                                        <td>{{ receta.paciente }}</td>
                                                        <td>{{ receta.medico }}</td>
                                                        <td>{{ receta.descripcion }}</td>
							<td>{{ receta.vencimiento }}</td>
                                                        <td>{{ receta.estado }}</td>
							<td><a class="btn btn-sm btn-danger" href="/editar_receta/{{ receta.id }}">Editar</a></td>
                                                </tr>
                                        {% endfor %}
				</tbody>

                        </table>
		{% endif %}

	</div>


	<script type="text/javascript">
                // esto corrije el tipo del campo imput 'id_vencimiento' en el formulario para crear recetas
                // por alguna razon no quiere cambiar el type a date
                window.onload = function() {
                        document.getElementById('id_vencimiento').type = 'date';
                        //document.getElementById('id_fecha_de_nacimiento').type = 'date';
                }
        </script>
	
{% endblock content %}

